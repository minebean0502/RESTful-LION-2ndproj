<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- 반응형 웹 설정 추가 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>호텔 예약 메인 페이지</title>
    <!-- 부트 스트랩 추가 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/css/slider.css">
    <!--    <link rel="stylesheet" href="/static/css/header.css">-->
    <!--    <link rel="stylesheet" href="/static/css/footer.css">-->
    <style>
        .header-bar {
            background-color: #FF9900;
            color: white;
            padding: 10px;
            margin: 10px;
            text-align: center;
        }

        .header-bar a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        h1 {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        form {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .input-group {
            flex-grow: 1;
            min-width: 120px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
        }

        .input-group input[type="date"],
        .input-group input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .search-keyword {
            display: flex;
            flex-grow: 2;
        }

        .search-keyword input {
            flex-grow: 1;
        }

        .slider {
            width: 100%;
        }

        button {
            padding: 10px;
            border: 1px solid #000;
            background-color: #fff;
            cursor: pointer;
        }

        button:hover {
            background-color: #eee;
        }

        .main-container {
            /*border: 2px solid #000000;*/
            padding: 10px;
            margin: 0px 10px 10px 10px;
            height: 100%;
        }

        .search-container {
            border: 2px solid #000000;
            background: #fff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 2rem auto;
            width: 80%;
            max-width: 500px;
            transition: box-shadow 0.3s ease-in-out;
        }

        .search-container:hover {
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }

        .main-content {
            /*border: 2px solid #000;*/
            border-radius: 10px;
            margin: 5% 10% 10% 10%;
            height: 500px;
            max-width: 80%;
            /*max-height: 100%;*/
            overflow: hidden
        }

        .lion-background {
            /*border: 2px solid #000;*/
            /*border-radius: 50px;*/
            text-align: center;
            background-image: url("../../static/tempHotel/lion2.png");
            background-color: yellow;
            /*background-size: cover;*/
            background-size: auto; /* 원본 크기 유지 */
            background-repeat: no-repeat; /* 이미지가 반복되지 않도록 설정 */
            background-position: center; /* 이미지가 중앙에 위치하도록 설정 */
            height: 200px;
            width: 100%;
            /*padding: 10px;*/
            overflow: hidden;
        }

        .main-background {
            border-radius: 2px;
            /*margin: 0px 5px 0px 5px;*/
            /*padding: 5px;*/
            background-color: white;
        }

        .scroll {
            height: auto;
        }
    </style>
</head>
<body>

<!-- 네비게이션 바, -->
<header>
    <th:block th:replace="~{updown/header}"></th:block>
</header><br>

<!-- 사자 배경화면-->
<div class="main-background">
    <div class="lion-background"></div>
</div>
<!-- 몸통 시작 -->
<main class="main-container">
    <!-- 검색 컨테이너 -->
    <div class="search-container">
        <h1>호텔 검색</h1>
        <div class="input-group search-keyword">
            <label for="search-keyword">키워드/이름</label>
            <input type="text" id="search-keyword" name="keyword" placeholder="검색어 입력">
        </div>
        <form id="search-form">
            <div class="input-group">
                <label for="checkin-date">체크인 날짜</label>
                <input type="date" id="checkin-date" name="checkin">
            </div>
            <div class="input-group">
                <label for="checkout-date">체크아웃 날짜</label>
                <input type="date" id="checkout-date" name="checkout">
            </div>
            <button type="submit">검색</button>
        </form>
    </div>

    <!-- 하단에 이미지 슬라이더 표시하기-->
    <div class="main-content">
        <div id="slider" class="slider">
            <!-- TODO 나중에 호텔 썸네일 이미지 링크로 바꿔두기 -->
            <div class="slide" style="background-image: url('/static/tempHotel/h1.jpg');"></div>
            <div class="slide" style="background-image: url('/static/tempHotel/h2.jpg');"></div>
            <div class="slide" style="background-image: url('/static/tempHotel/h3.jpg');"></div>
            <div class="slide" style="background-image: url('/static/tempHotel/h4.jpg');"></div>
            <div class="slide" style="background-image: url('/static/tempHotel/h5.jpg');"></div>

            <a class="prev" onclick="moveSlide(-1)">&#10094;</a>
            <a class="next" onclick="moveSlide(1)">&#10095;</a>
        </div>
    </div>
</main>
<!-- 메인에 들어갈것 사진만 집어넣읍시다-->

<div class="scroll">

</div>

<!--맨 밑에 쓸 footer-->
<th:block th:replace="~{updown/footer}"></th:block>
</body>
<script>
    let slideIndex = 0;
    window.onload = function() {
        let today = new Date();

        // 체크인 날짜 설정: 오늘로부터 3일 후
        let checkInDate = new Date(today);
        checkInDate.setDate(today.getDate() + 3);
        let checkInString = checkInDate.toISOString().substring(0, 10);

        // 체크아웃 날짜 설정: 체크인 날짜로부터 2일 후
        let checkOutDate = new Date(checkInDate);
        checkOutDate.setDate(checkInDate.getDate() + 5);
        let checkOutString = checkOutDate.toISOString().substring(0, 10);

        // 입력 필드에 날짜 설정
        document.getElementById('checkin-date').value = checkInString;
        document.getElementById('checkout-date').value = checkOutString;
    };


    function showSlides() {
        let slides = document.getElementsByClassName("slide");
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
            slideIndex = 1
        }
        slides[slideIndex - 1].style.display = "block";
        setTimeout(showSlides, 5000); // Change image every 5 seconds
    }

    function moveSlide(n) {
        slideIndex += n - 1;
        showSlides();
    }

    window.addEventListener('load', showSlides);

    document.getElementById('search-form').addEventListener('submit', function (event) {
        event.preventDefault(); // 기본 제출 방지
        // requestparam으로 보낼 3가지 키워드
        var keyword = document.getElementById('search-keyword').value;      // 키워드
        var checkIn = document.getElementById('checkin-date').value;        // 체크인
        var checkOut = document.getElementById('checkout-date').value;      // 체크아웃

        var url = `/hotel/search?keyword=${encodeURIComponent(keyword)}` +
            `&checkIn=${encodeURIComponent(checkIn)}` +
            `&checkOut=${encodeURIComponent(checkOut)}`;
        // 리다이렉트 시켜서 보내줍시다
        window.location = url;
    })
</script>
</html>
